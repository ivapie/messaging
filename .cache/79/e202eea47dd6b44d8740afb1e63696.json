{"id":"node_modules/@google-cloud/firestore/build/src/pool.js","dependencies":[{"name":"/Users/ivanpiedra/Desktop/test/package.json","includedInParent":true,"mtime":1550784608667},{"name":"/Users/ivanpiedra/Desktop/test/node_modules/@google-cloud/firestore/package.json","includedInParent":true,"mtime":1550784604715},{"name":"assert","loc":{"line":18,"column":23},"parent":"/Users/ivanpiedra/Desktop/test/node_modules/@google-cloud/firestore/build/src/pool.js","resolved":"/Users/ivanpiedra/Desktop/test/node_modules/assert/assert.js"}],"generated":{"js":"\"use strict\";\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar assert = require(\"assert\");\n/**\n * An auto-resizing pool that distributes concurrent operations over multiple\n * clients of type `T`.\n *\n * ClientPool is used within Firestore to manage a pool of GAPIC clients and\n * automatically initializes multiple clients if we issue more than 100\n * concurrent operations.\n *\n * @private\n */\n\n\nvar ClientPool =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param concurrentOperationLimit The number of operations that each client\n   * can handle.\n   * @param clientFactory A factory function called as needed when new clients\n   * are required.\n   */\n  function ClientPool(concurrentOperationLimit, clientFactory) {\n    _classCallCheck(this, ClientPool);\n\n    this.concurrentOperationLimit = concurrentOperationLimit;\n    this.clientFactory = clientFactory;\n    /**\n     * Stores each active clients and how many operations it has outstanding.\n     * @private\n     */\n\n    this.activeClients = new Map();\n  }\n  /**\n   * Returns an already existing client if it has less than the maximum number\n   * of concurrent operations or initializes and returns a new client.\n   *\n   * @private\n   */\n\n\n  _createClass(ClientPool, [{\n    key: \"acquire\",\n    value: function acquire() {\n      var _this = this;\n\n      var selectedClient = null;\n      var selectedRequestCount = 0;\n      this.activeClients.forEach(function (requestCount, client) {\n        if (!selectedClient && requestCount < _this.concurrentOperationLimit) {\n          selectedClient = client;\n          selectedRequestCount = requestCount;\n        }\n      });\n\n      if (!selectedClient) {\n        selectedClient = this.clientFactory();\n        assert(!this.activeClients.has(selectedClient), 'The provided client factory returned an existing instance');\n      }\n\n      this.activeClients.set(selectedClient, selectedRequestCount + 1);\n      return selectedClient;\n    }\n    /**\n     * Reduces the number of operations for the provided client, potentially\n     * removing it from the pool of active clients.\n     * @private\n     */\n\n  }, {\n    key: \"release\",\n    value: function release(client) {\n      var requestCount = this.activeClients.get(client) || 0;\n      assert(requestCount > 0, 'No active request');\n      requestCount = requestCount - 1;\n      this.activeClients.set(client, requestCount);\n\n      if (requestCount === 0) {\n        this.garbageCollect();\n      }\n    }\n    /**\n     * The number of currently registered clients.\n     *\n     * @return Number of currently registered clients.\n     * @private\n     */\n    // Visible for testing.\n\n  }, {\n    key: \"run\",\n\n    /**\n     * Runs the provided operation in this pool. This function may create an\n     * additional client if all existing clients already operate at the concurrent\n     * operation limit.\n     *\n     * @param op A callback function that returns a Promise. The client T will\n     * be returned to the pool when callback finishes.\n     * @return A Promise that resolves with the result of `op`.\n     * @private\n     */\n    value: function run(op) {\n      var _this2 = this;\n\n      var client = this.acquire();\n      return op(client).catch(function (err) {\n        _this2.release(client);\n\n        return Promise.reject(err);\n      }).then(function (res) {\n        _this2.release(client);\n\n        return res;\n      });\n    }\n    /**\n     * Deletes clients that are no longer executing operations. Keeps up to one\n     * idle client to reduce future initialization costs.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"garbageCollect\",\n    value: function garbageCollect() {\n      var _this3 = this;\n\n      var idleClients = 0;\n      this.activeClients.forEach(function (requestCount, client) {\n        if (requestCount === 0) {\n          ++idleClients;\n\n          if (idleClients > 1) {\n            _this3.activeClients.delete(client);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"size\",\n    get: function () {\n      return this.activeClients.size;\n    }\n  }]);\n\n  return ClientPool;\n}();\n\nexports.ClientPool = ClientPool;","map":{"mappings":[{"generated":{"line":1,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":1,"column":0}},{"generated":{"line":2,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":2,"column":0}},{"name":"Object","generated":{"line":24,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":0}},{"generated":{"line":24,"column":6},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":6}},{"name":"defineProperty","generated":{"line":24,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":7}},{"generated":{"line":24,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":0}},{"name":"exports","generated":{"line":24,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":22}},{"generated":{"line":24,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":0}},{"generated":{"line":24,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":31}},{"generated":{"line":24,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":0}},{"generated":{"line":24,"column":45},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":45}},{"name":"value","generated":{"line":25,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":47}},{"name":"value","generated":{"line":25,"column":2},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":47}},{"generated":{"line":25,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":52}},{"generated":{"line":25,"column":9},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":54}},{"generated":{"line":26,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":45}},{"generated":{"line":26,"column":1},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":17,"column":0}},{"generated":{"line":28,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":0}},{"name":"assert","generated":{"line":28,"column":4},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":6}},{"generated":{"line":28,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":12}},{"name":"require","generated":{"line":28,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":15}},{"generated":{"line":28,"column":20},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":22}},{"generated":{"line":28,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":23}},{"generated":{"line":28,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":22}},{"generated":{"line":28,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":18,"column":0}},{"generated":{"line":29,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":19,"column":0}},{"name":"ClientPool","generated":{"line":41,"column":4},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":29,"column":6}},{"generated":{"line":44,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":30,"column":4}},{"generated":{"line":50,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":4}},{"name":"concurrentOperationLimit","generated":{"line":50,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":16}},{"generated":{"line":50,"column":46},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":4}},{"name":"clientFactory","generated":{"line":50,"column":48},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":42}},{"generated":{"line":50,"column":61},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":4}},{"generated":{"line":50,"column":63},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":57}},{"generated":{"line":51,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":36,"column":57}},{"generated":{"line":53,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":37,"column":8}},{"name":"concurrentOperationLimit","generated":{"line":53,"column":9},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":37,"column":13}},{"generated":{"line":53,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":37,"column":8}},{"name":"concurrentOperationLimit","generated":{"line":53,"column":36},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":37,"column":40}},{"generated":{"line":53,"column":60},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":37,"column":8}},{"generated":{"line":54,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":38,"column":8}},{"name":"clientFactory","generated":{"line":54,"column":9},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":38,"column":13}},{"generated":{"line":54,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":38,"column":8}},{"name":"clientFactory","generated":{"line":54,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":38,"column":29}},{"generated":{"line":54,"column":38},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":38,"column":8}},{"generated":{"line":55,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":39,"column":8}},{"generated":{"line":60,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":8}},{"name":"activeClients","generated":{"line":60,"column":9},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":13}},{"generated":{"line":60,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":8}},{"generated":{"line":60,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":29}},{"name":"Map","generated":{"line":60,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":33}},{"generated":{"line":60,"column":32},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":29}},{"generated":{"line":60,"column":34},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":43,"column":8}},{"generated":{"line":61,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":44,"column":5}},{"generated":{"line":62,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":45,"column":4}},{"generated":{"line":72,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":51,"column":14}},{"generated":{"line":73,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":51,"column":14}},{"generated":{"line":75,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":52,"column":8}},{"name":"selectedClient","generated":{"line":75,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":52,"column":12}},{"generated":{"line":75,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":52,"column":26}},{"generated":{"line":75,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":52,"column":29}},{"generated":{"line":75,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":52,"column":8}},{"generated":{"line":76,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":53,"column":8}},{"name":"selectedRequestCount","generated":{"line":76,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":53,"column":12}},{"generated":{"line":76,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":53,"column":32}},{"generated":{"line":76,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":53,"column":35}},{"generated":{"line":76,"column":34},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":53,"column":8}},{"generated":{"line":77,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":8}},{"name":"activeClients","generated":{"line":77,"column":11},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":13}},{"generated":{"line":77,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":8}},{"name":"forEach","generated":{"line":77,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":27}},{"generated":{"line":77,"column":32},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":8}},{"generated":{"line":77,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":35}},{"name":"requestCount","generated":{"line":77,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":36}},{"generated":{"line":77,"column":55},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":35}},{"name":"client","generated":{"line":77,"column":57},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":50}},{"generated":{"line":77,"column":63},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":35}},{"generated":{"line":77,"column":65},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":61}},{"generated":{"line":78,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":12}},{"generated":{"line":78,"column":12},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":16}},{"name":"selectedClient","generated":{"line":78,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":17}},{"generated":{"line":78,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":16}},{"name":"requestCount","generated":{"line":78,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":35}},{"generated":{"line":78,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":47}},{"generated":{"line":78,"column":46},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":50}},{"generated":{"line":78,"column":51},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":54}},{"name":"concurrentOperationLimit","generated":{"line":78,"column":52},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":55}},{"generated":{"line":78,"column":76},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":12}},{"generated":{"line":78,"column":78},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":55,"column":81}},{"name":"selectedClient","generated":{"line":79,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":56,"column":16}},{"name":"selectedClient","generated":{"line":79,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":56,"column":16}},{"generated":{"line":79,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":56,"column":30}},{"name":"client","generated":{"line":79,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":56,"column":33}},{"generated":{"line":79,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":56,"column":16}},{"name":"selectedRequestCount","generated":{"line":80,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":57,"column":16}},{"name":"selectedRequestCount","generated":{"line":80,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":57,"column":16}},{"generated":{"line":80,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":57,"column":36}},{"name":"requestCount","generated":{"line":80,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":57,"column":39}},{"generated":{"line":80,"column":45},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":57,"column":16}},{"generated":{"line":81,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":58,"column":13}},{"generated":{"line":82,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":59,"column":9}},{"generated":{"line":82,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":54,"column":8}},{"generated":{"line":84,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":60,"column":8}},{"generated":{"line":84,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":60,"column":12}},{"name":"selectedClient","generated":{"line":84,"column":11},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":60,"column":13}},{"generated":{"line":84,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":60,"column":8}},{"generated":{"line":84,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":60,"column":29}},{"name":"selectedClient","generated":{"line":85,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":12}},{"name":"selectedClient","generated":{"line":85,"column":8},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":12}},{"generated":{"line":85,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":26}},{"generated":{"line":85,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":29}},{"name":"clientFactory","generated":{"line":85,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":34}},{"generated":{"line":85,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":29}},{"generated":{"line":85,"column":45},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":61,"column":12}},{"name":"assert","generated":{"line":86,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":12}},{"name":"assert","generated":{"line":86,"column":8},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":12}},{"generated":{"line":86,"column":14},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":18}},{"generated":{"line":86,"column":15},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":19}},{"generated":{"line":86,"column":16},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":20}},{"name":"activeClients","generated":{"line":86,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":25}},{"generated":{"line":86,"column":34},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":20}},{"name":"has","generated":{"line":86,"column":35},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":39}},{"generated":{"line":86,"column":38},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":20}},{"name":"selectedClient","generated":{"line":86,"column":39},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":43}},{"generated":{"line":86,"column":53},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":20}},{"generated":{"line":86,"column":54},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":18}},{"generated":{"line":86,"column":56},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":60}},{"generated":{"line":86,"column":115},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":18}},{"generated":{"line":86,"column":116},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":62,"column":12}},{"generated":{"line":87,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":63,"column":9}},{"generated":{"line":89,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":8}},{"name":"activeClients","generated":{"line":89,"column":11},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":13}},{"generated":{"line":89,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":8}},{"name":"set","generated":{"line":89,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":27}},{"generated":{"line":89,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":8}},{"name":"selectedClient","generated":{"line":89,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":31}},{"generated":{"line":89,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":8}},{"name":"selectedRequestCount","generated":{"line":89,"column":45},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":47}},{"generated":{"line":89,"column":65},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":67}},{"generated":{"line":89,"column":68},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":70}},{"generated":{"line":89,"column":69},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":64,"column":8}},{"generated":{"line":90,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":65,"column":8}},{"name":"selectedClient","generated":{"line":90,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":65,"column":15}},{"generated":{"line":90,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":65,"column":8}},{"generated":{"line":91,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":66,"column":5}},{"generated":{"line":92,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":67,"column":4}},{"name":"client","generated":{"line":100,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":72,"column":12}},{"generated":{"line":100,"column":36},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":72,"column":20}},{"generated":{"line":101,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":8}},{"name":"requestCount","generated":{"line":101,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":12}},{"generated":{"line":101,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":24}},{"generated":{"line":101,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":27}},{"name":"activeClients","generated":{"line":101,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":32}},{"generated":{"line":101,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":27}},{"name":"get","generated":{"line":101,"column":44},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":46}},{"generated":{"line":101,"column":47},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":27}},{"name":"client","generated":{"line":101,"column":48},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":50}},{"generated":{"line":101,"column":54},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":27}},{"generated":{"line":101,"column":59},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":61}},{"generated":{"line":101,"column":60},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":73,"column":8}},{"name":"assert","generated":{"line":102,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":8}},{"name":"assert","generated":{"line":102,"column":6},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":8}},{"generated":{"line":102,"column":12},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":14}},{"name":"requestCount","generated":{"line":102,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":15}},{"generated":{"line":102,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":27}},{"generated":{"line":102,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":30}},{"generated":{"line":102,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":14}},{"generated":{"line":102,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":33}},{"generated":{"line":102,"column":50},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":14}},{"generated":{"line":102,"column":51},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":74,"column":8}},{"name":"requestCount","generated":{"line":103,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":8}},{"name":"requestCount","generated":{"line":103,"column":6},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":8}},{"generated":{"line":103,"column":18},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":20}},{"name":"requestCount","generated":{"line":103,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":23}},{"generated":{"line":103,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":35}},{"generated":{"line":103,"column":36},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":38}},{"generated":{"line":103,"column":37},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":75,"column":8}},{"generated":{"line":104,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":8}},{"name":"activeClients","generated":{"line":104,"column":11},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":13}},{"generated":{"line":104,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":8}},{"name":"set","generated":{"line":104,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":27}},{"generated":{"line":104,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":8}},{"name":"client","generated":{"line":104,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":31}},{"generated":{"line":104,"column":35},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":8}},{"name":"requestCount","generated":{"line":104,"column":37},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":39}},{"generated":{"line":104,"column":49},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":76,"column":8}},{"generated":{"line":106,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":77,"column":8}},{"name":"requestCount","generated":{"line":106,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":77,"column":12}},{"generated":{"line":106,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":77,"column":24}},{"generated":{"line":106,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":77,"column":29}},{"generated":{"line":106,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":77,"column":8}},{"generated":{"line":106,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":77,"column":32}},{"generated":{"line":107,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":78,"column":12}},{"name":"garbageCollect","generated":{"line":107,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":78,"column":17}},{"generated":{"line":107,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":78,"column":12}},{"generated":{"line":108,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":79,"column":9}},{"generated":{"line":109,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":80,"column":5}},{"generated":{"line":110,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":81,"column":4}},{"generated":{"line":116,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":87,"column":4}},{"generated":{"line":121,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":91,"column":4}},{"name":"op","generated":{"line":131,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":101,"column":8}},{"generated":{"line":131,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":101,"column":12}},{"generated":{"line":132,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":101,"column":12}},{"generated":{"line":134,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":8}},{"name":"client","generated":{"line":134,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":14}},{"generated":{"line":134,"column":16},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":20}},{"generated":{"line":134,"column":19},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":23}},{"name":"acquire","generated":{"line":134,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":28}},{"generated":{"line":134,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":23}},{"generated":{"line":134,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":102,"column":8}},{"generated":{"line":135,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":8}},{"name":"op","generated":{"line":135,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":15}},{"generated":{"line":135,"column":15},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":17}},{"name":"client","generated":{"line":135,"column":16},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":18}},{"generated":{"line":135,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":17}},{"generated":{"line":135,"column":23},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":15}},{"name":"catch","generated":{"line":135,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":104,"column":13}},{"generated":{"line":135,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":15}},{"generated":{"line":135,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":104,"column":19}},{"name":"err","generated":{"line":135,"column":40},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":104,"column":19}},{"generated":{"line":135,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":104,"column":22}},{"generated":{"line":135,"column":45},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":104,"column":26}},{"generated":{"line":136,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":12}},{"generated":{"line":136,"column":8},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":12}},{"generated":{"line":136,"column":14},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":16}},{"name":"release","generated":{"line":136,"column":15},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":17}},{"generated":{"line":136,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":12}},{"name":"client","generated":{"line":136,"column":23},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":25}},{"generated":{"line":136,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":105,"column":12}},{"generated":{"line":138,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":12}},{"name":"Promise","generated":{"line":138,"column":15},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":19}},{"generated":{"line":138,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":26}},{"name":"reject","generated":{"line":138,"column":23},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":27}},{"generated":{"line":138,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":19}},{"name":"err","generated":{"line":138,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":34}},{"generated":{"line":138,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":19}},{"generated":{"line":138,"column":34},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":106,"column":12}},{"generated":{"line":139,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":107,"column":9}},{"generated":{"line":139,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":15}},{"name":"then","generated":{"line":139,"column":9},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":108,"column":13}},{"generated":{"line":139,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":15}},{"generated":{"line":139,"column":14},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":108,"column":18}},{"name":"res","generated":{"line":139,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":108,"column":18}},{"generated":{"line":139,"column":27},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":108,"column":21}},{"generated":{"line":139,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":108,"column":25}},{"generated":{"line":140,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":12}},{"generated":{"line":140,"column":8},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":12}},{"generated":{"line":140,"column":14},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":16}},{"name":"release","generated":{"line":140,"column":15},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":17}},{"generated":{"line":140,"column":22},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":12}},{"name":"client","generated":{"line":140,"column":23},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":25}},{"generated":{"line":140,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":109,"column":12}},{"generated":{"line":142,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":110,"column":12}},{"name":"res","generated":{"line":142,"column":15},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":110,"column":19}},{"generated":{"line":142,"column":18},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":110,"column":12}},{"generated":{"line":143,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":111,"column":9}},{"generated":{"line":143,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":15}},{"generated":{"line":143,"column":8},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":103,"column":8}},{"generated":{"line":144,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":112,"column":5}},{"generated":{"line":145,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":113,"column":4}},{"generated":{"line":154,"column":37},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":119,"column":21}},{"generated":{"line":155,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":119,"column":21}},{"generated":{"line":157,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":120,"column":8}},{"name":"idleClients","generated":{"line":157,"column":10},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":120,"column":12}},{"generated":{"line":157,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":120,"column":23}},{"generated":{"line":157,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":120,"column":26}},{"generated":{"line":157,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":120,"column":8}},{"generated":{"line":158,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":8}},{"name":"activeClients","generated":{"line":158,"column":11},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":13}},{"generated":{"line":158,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":8}},{"name":"forEach","generated":{"line":158,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":27}},{"generated":{"line":158,"column":32},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":8}},{"generated":{"line":158,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":35}},{"name":"requestCount","generated":{"line":158,"column":43},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":36}},{"generated":{"line":158,"column":55},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":35}},{"name":"client","generated":{"line":158,"column":57},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":50}},{"generated":{"line":158,"column":63},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":35}},{"generated":{"line":158,"column":65},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":61}},{"generated":{"line":159,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":122,"column":12}},{"name":"requestCount","generated":{"line":159,"column":12},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":122,"column":16}},{"generated":{"line":159,"column":24},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":122,"column":28}},{"generated":{"line":159,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":122,"column":33}},{"generated":{"line":159,"column":30},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":122,"column":12}},{"generated":{"line":159,"column":32},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":122,"column":36}},{"generated":{"line":160,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":123,"column":16}},{"name":"idleClients","generated":{"line":160,"column":12},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":123,"column":18}},{"generated":{"line":160,"column":23},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":123,"column":16}},{"generated":{"line":162,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":124,"column":16}},{"name":"idleClients","generated":{"line":162,"column":14},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":124,"column":20}},{"generated":{"line":162,"column":25},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":124,"column":31}},{"generated":{"line":162,"column":28},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":124,"column":34}},{"generated":{"line":162,"column":29},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":124,"column":16}},{"generated":{"line":162,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":124,"column":37}},{"generated":{"line":163,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":20}},{"generated":{"line":163,"column":12},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":20}},{"generated":{"line":163,"column":18},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":24}},{"name":"activeClients","generated":{"line":163,"column":19},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":25}},{"generated":{"line":163,"column":32},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":20}},{"name":"delete","generated":{"line":163,"column":33},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":39}},{"generated":{"line":163,"column":39},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":20}},{"name":"client","generated":{"line":163,"column":40},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":46}},{"generated":{"line":163,"column":46},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":125,"column":20}},{"generated":{"line":164,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":126,"column":17}},{"generated":{"line":165,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":127,"column":13}},{"generated":{"line":166,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":128,"column":9}},{"generated":{"line":166,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":121,"column":8}},{"generated":{"line":167,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":129,"column":5}},{"generated":{"line":170,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":88,"column":15}},{"generated":{"line":171,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":89,"column":8}},{"generated":{"line":171,"column":13},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":89,"column":15}},{"name":"activeClients","generated":{"line":171,"column":18},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":89,"column":20}},{"generated":{"line":171,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":89,"column":15}},{"name":"size","generated":{"line":171,"column":32},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":89,"column":34}},{"generated":{"line":171,"column":36},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":89,"column":8}},{"generated":{"line":172,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":90,"column":5}},{"name":"exports","generated":{"line":178,"column":0},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":131,"column":0}},{"generated":{"line":178,"column":7},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":131,"column":7}},{"name":"ClientPool","generated":{"line":178,"column":8},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":131,"column":8}},{"generated":{"line":178,"column":18},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":131,"column":0}},{"name":"ClientPool","generated":{"line":178,"column":21},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":131,"column":21}},{"generated":{"line":178,"column":31},"source":"node_modules/@google-cloud/firestore/build/src/pool.js","original":{"line":131,"column":0}}],"sources":{"node_modules/@google-cloud/firestore/build/src/pool.js":"\"use strict\";\n/*!\n * Copyright 2018 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst assert = require(\"assert\");\n/**\n * An auto-resizing pool that distributes concurrent operations over multiple\n * clients of type `T`.\n *\n * ClientPool is used within Firestore to manage a pool of GAPIC clients and\n * automatically initializes multiple clients if we issue more than 100\n * concurrent operations.\n *\n * @private\n */\nclass ClientPool {\n    /**\n     * @param concurrentOperationLimit The number of operations that each client\n     * can handle.\n     * @param clientFactory A factory function called as needed when new clients\n     * are required.\n     */\n    constructor(concurrentOperationLimit, clientFactory) {\n        this.concurrentOperationLimit = concurrentOperationLimit;\n        this.clientFactory = clientFactory;\n        /**\n         * Stores each active clients and how many operations it has outstanding.\n         * @private\n         */\n        this.activeClients = new Map();\n    }\n    /**\n     * Returns an already existing client if it has less than the maximum number\n     * of concurrent operations or initializes and returns a new client.\n     *\n     * @private\n     */\n    acquire() {\n        let selectedClient = null;\n        let selectedRequestCount = 0;\n        this.activeClients.forEach((requestCount, client) => {\n            if (!selectedClient && requestCount < this.concurrentOperationLimit) {\n                selectedClient = client;\n                selectedRequestCount = requestCount;\n            }\n        });\n        if (!selectedClient) {\n            selectedClient = this.clientFactory();\n            assert(!this.activeClients.has(selectedClient), 'The provided client factory returned an existing instance');\n        }\n        this.activeClients.set(selectedClient, selectedRequestCount + 1);\n        return selectedClient;\n    }\n    /**\n     * Reduces the number of operations for the provided client, potentially\n     * removing it from the pool of active clients.\n     * @private\n     */\n    release(client) {\n        let requestCount = this.activeClients.get(client) || 0;\n        assert(requestCount > 0, 'No active request');\n        requestCount = requestCount - 1;\n        this.activeClients.set(client, requestCount);\n        if (requestCount === 0) {\n            this.garbageCollect();\n        }\n    }\n    /**\n     * The number of currently registered clients.\n     *\n     * @return Number of currently registered clients.\n     * @private\n     */\n    // Visible for testing.\n    get size() {\n        return this.activeClients.size;\n    }\n    /**\n     * Runs the provided operation in this pool. This function may create an\n     * additional client if all existing clients already operate at the concurrent\n     * operation limit.\n     *\n     * @param op A callback function that returns a Promise. The client T will\n     * be returned to the pool when callback finishes.\n     * @return A Promise that resolves with the result of `op`.\n     * @private\n     */\n    run(op) {\n        const client = this.acquire();\n        return op(client)\n            .catch(err => {\n            this.release(client);\n            return Promise.reject(err);\n        })\n            .then(res => {\n            this.release(client);\n            return res;\n        });\n    }\n    /**\n     * Deletes clients that are no longer executing operations. Keeps up to one\n     * idle client to reduce future initialization costs.\n     *\n     * @private\n     */\n    garbageCollect() {\n        let idleClients = 0;\n        this.activeClients.forEach((requestCount, client) => {\n            if (requestCount === 0) {\n                ++idleClients;\n                if (idleClients > 1) {\n                    this.activeClients.delete(client);\n                }\n            }\n        });\n    }\n}\nexports.ClientPool = ClientPool;\n"},"lineCount":null}},"hash":"fbd187c3224c7b4cfad347eea80f0940","cacheData":{"env":{}}}